Протокол обмена версия 0.1:

C<data>#<control sum>\n
C<code>\n
<data>#<control sum>\n

<code> ::= OK | ERROR | <other code>
<control sum> ::= <sum of all bytes data till # (command excluded, # excluded)> mod 65536


Обмен инициируется клиентом (андроид, rpi).
1. Послать однобайтовую команду
2. Ждать ответа (тот же байт, что был послан) в течение 1 секунды
3. Если ответ не пришел или ответ неправильный, передать \n (0x0A) и повторить (или ошибка)
4. Передать данные, #, контрольную сумму, \n
5. Получить код возврата (до \n)
5. Получить данные, если они есть по протоколу (до \n)

Загрузка расписания выключает полив, если он производился в момент загрузки.

Команды.

V - получить версию ПО
-> V#0\n
<- VOK\n
<- 0.1#143\n

S - установить часы
-> S2014-06-26 22:58:00#xxxx\n
<- SOK\n

G - получить показания часов
-> G#0\n
<- GOK\n
<- 2014-06-26 22:58:00#xxxx\n

D - получить показание датчика
-> D<номер датчика>#<контр>\n
<- DOK\n
<- <значение>#<контр>\n

N - получить число поливалок
-> N#0\n
<- NOK\n
<- 3#51\n

L - получить расписание полива
-> L#0\n
<- LOK\n
<- <строка;...;строка;>#<контр>\n

T - загрузить расписание полива
-> T<строка;...;строка;>#<контр>\n
<- TOK\n


Только для отладки:
X - проверить состояние pinN
-> XN#xx\n
<- XOK\n
<- Pin N is HIGH/LOW#xxx\n
Y - включить у-во на pinN
-> YN#xx\n
<- YOK\n
Z - выключить у-во на pinN
-> ZN#xx\n
<- ZOK\n
P - выключить насос и клапана